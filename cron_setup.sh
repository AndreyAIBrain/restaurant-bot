#!/bin/bash

echo "‚è∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞..."

# –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
SCRIPT_DIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
BOT_SCRIPT="$SCRIPT_DIR/bot_service.py"

# –°–æ–∑–¥–∞–µ–º cron –∑–∞–¥–∞—á—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
(crontab -l 2>/dev/null; echo "*/5 * * * * pgrep -f bot_service.py > /dev/null || cd $SCRIPT_DIR && python3 bot_service.py > /dev/null 2>&1") | crontab -

echo "‚úÖ Cron –∑–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!"
echo "üìã –ë–æ—Ç –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç, –µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å —É–ø–∞–¥–µ—Ç"
echo ""
echo "–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ cron –∑–∞–¥–∞—á: crontab -l"
echo "–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è cron –∑–∞–¥–∞—á: crontab -r" 